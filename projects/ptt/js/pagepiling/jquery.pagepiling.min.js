!function(e,t,n,i){"use strict";e.fn.pagepiling=function(a){function g(e){e.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function k(t){var n=e(".pp-section.active").index(".pp-section"),i=t.index(".pp-section");return n>i?"up":"down"}function b(t,n){var i={destination:t,animated:n,activeSection:e(".pp-section.active"),anchorLink:t.data("anchor"),sectionIndex:t.index(".pp-section"),toMove:t,yMovement:k(t),leavingSection:e(".pp-section.active").index(".pp-section")+1};if(!i.activeSection.is(t)){"undefined"==typeof i.animated&&(i.animated=!0),"undefined"!=typeof i.anchorLink&&T(i.anchorLink,i.sectionIndex),i.destination.addClass("active").siblings().removeClass("active"),i.sectionsToMove=S(i),"down"===i.yMovement?(i.translate3d=Q(),i.scrolling="-100%",h.css3||i.sectionsToMove.each(function(t){t!=i.activeSection.index(".pp-section")&&e(this).css(_(i.scrolling))}),i.animateSection=i.activeSection):(i.translate3d="translate3d(0px, 0px, 0px)",i.scrolling="0",i.animateSection=t),e.isFunction(h.onLeave)&&h.onLeave.call(this,i.leavingSection,i.sectionIndex+1,i.yMovement),x(i),Y(i.anchorLink),K(i.anchorLink,i.sectionIndex),s=i.anchorLink;var a=(new Date).getTime();l=a}}function x(t){h.css3?(D(t.animateSection,t.translate3d,t.animated),t.sectionsToMove.each(function(){D(e(this),t.translate3d,t.animated)}),setTimeout(function(){y(t)},h.scrollingSpeed)):(t.scrollOptions=_(t.scrolling),t.animated?t.animateSection.animate(t.scrollOptions,h.scrollingSpeed,h.easing,function(){w(t),y(t)}):(t.animateSection.css(_(t.scrolling)),setTimeout(function(){w(t),y(t)},400)))}function y(t){e.isFunction(h.afterLoad)&&h.afterLoad.call(this,t.anchorLink,t.sectionIndex+1)}function S(t){var n;return n="down"===t.yMovement?e(".pp-section").map(function(n){return n<t.destination.index(".pp-section")?e(this):void 0}):e(".pp-section").map(function(n){return n>t.destination.index(".pp-section")?e(this):void 0})}function w(t){"up"===t.yMovement&&t.sectionsToMove.each(function(n){e(this).css(_(t.scrolling))})}function _(e){return"vertical"===h.direction?{top:e}:{left:e}}function T(e,t){h.anchors.length?(location.hash=e,M(location.hash)):M(String(t))}function M(t){t=t.replace("#",""),e("body")[0].className=e("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),e("body").addClass("pp-viewing-"+t)}function E(){var i=n.location.hash.replace("#",""),a=i,r=e(t).find('.pp-section[data-anchor="'+a+'"]');r.length>0&&b(r,h.animateAnchor)}function B(){var e=(new Date).getTime();return e-l<m+h.scrollingSpeed?!0:!1}function O(){var i=n.location.hash.replace("#","").split("/"),a=i[0];if(a.length&&a&&a!==s){var r;r=isNaN(a)?e(t).find('[data-anchor="'+a+'"]'):e(".pp-section").eq(a-1),b(r)}}function P(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function D(e,t,n){e.toggleClass("pp-easing",n),e.css(P(t))}function I(t){if(!B()){t=n.event||t;var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.deltaY||-t.detail)),a=e(".pp-section.active"),r=$(a);return 0>i?A("down",r):A("up",r),!1}}function A(e,t){var n,i;if("down"==e?(n="bottom",i=r.moveSectionDown):(n="top",i=r.moveSectionUp),t.length>0){if(!L(n,t))return!0;i()}else i()}function L(e,t){return"top"===e?!t.scrollTop():"bottom"===e?t.scrollTop()+1+t.innerHeight()>=t[0].scrollHeight:void 0}function $(e){return e.filter(".pp-scrollable")}function j(){o.get(0).addEventListener?(o.get(0).removeEventListener("mousewheel",I,!1),o.get(0).removeEventListener("wheel",I,!1)):o.get(0).detachEvent("onmousewheel",I)}function R(){o.get(0).addEventListener?(o.get(0).addEventListener("mousewheel",I,!1),o.get(0).addEventListener("wheel",I,!1)):o.get(0).attachEvent("onmousewheel",I)}function F(){if(u){var e=H();o.off("touchstart "+e.down).on("touchstart "+e.down,z),o.off("touchmove "+e.move).on("touchmove "+e.move,G)}}function W(){if(u){var e=H();o.off("touchstart "+e.down),o.off("touchmove "+e.move)}}function H(){var e;return e=n.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function N(e){var t=new Array;return t.y="undefined"!=typeof e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x="undefined"!=typeof e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,t}function U(e){return"undefined"==typeof e.pointerType||"mouse"!=e.pointerType}function z(e){var t=e.originalEvent;if(U(t)){var n=N(t);f=n.y,c=n.x}}function G(t){var n=t.originalEvent;if(!q(t.target)&&U(n)){var i=e(".pp-section.active"),a=$(i);if(a.length||t.preventDefault(),!B()){var r=N(n);d=r.y,p=r.x,"horizontal"===h.direction&&Math.abs(c-p)>Math.abs(f-d)?Math.abs(c-p)>o.width()/100*h.touchSensitivity&&(c>p?A("down",a):p>c&&A("up",a)):Math.abs(f-d)>o.height()/100*h.touchSensitivity&&(f>d?A("down",a):d>f&&A("up",a))}}}function q(t,n){n=n||0;var i=e(t).parent();return n<h.normalScrollElementTouchThreshold&&i.is(h.normalScrollElements)?!0:n==h.normalScrollElementTouchThreshold?!1:q(i,++n)}function X(){e("body").append('<div id="pp-nav"><ul></ul></div>');var t=e("#pp-nav");t.css("color",h.navigation.textColor),t.addClass(h.navigation.position);for(var n=0;n<e(".pp-section").length;n++){var i="";if(h.anchors.length&&(i=h.anchors[n]),"undefined"!==h.navigation.tooltips){var a=h.navigation.tooltips[n];"undefined"==typeof a&&(a="")}t.find("ul").append('<li data-tooltip="'+a+'"><a href="#'+i+'"><span></span></a></li>')}t.find("span").css("border-color",h.navigation.bulletsColor)}function K(t,n){h.navigation&&(e("#pp-nav").find(".active").removeClass("active"),t?e("#pp-nav").find('a[href="#'+t+'"]').addClass("active"):e("#pp-nav").find("li").eq(n).find("a").addClass("active"))}function Y(t){h.menu&&(e(h.menu).find(".active").removeClass("active"),e(h.menu).find('[data-menuanchor="'+t+'"]').addClass("active"))}function V(){var a,e=t.createElement("p"),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};t.body.insertBefore(e,null);for(var o in r)e.style[o]!==i&&(e.style[o]="translate3d(1px,1px,1px)",a=n.getComputedStyle(e).getPropertyValue(r[o]));return t.body.removeChild(e),a!==i&&a.length>0&&"none"!==a}function Q(){return"vertical"!==h.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var s,r=e.fn.pagepiling,o=e(this),l=0,u="ontouchstart"in n||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,f=0,c=0,d=0,p=0,m=600,h=e.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},a);e.extend(e.easing,{easeInQuart:function(e,t,n,i,a){return i*(t/=a)*t*t*t+n}}),r.setScrollingSpeed=function(e){h.scrollingSpeed=e},r.setMouseWheelScrolling=function(e){e?R():j()},r.setAllowScrolling=function(e){e?(r.setMouseWheelScrolling(!0),F()):(r.setMouseWheelScrolling(!1),W())},r.setKeyboardScrolling=function(e){h.keyboardScrolling=e},r.moveSectionUp=function(){var t=e(".pp-section.active").prev(".pp-section");!t.length&&h.loopTop&&(t=e(".pp-section").last()),t.length&&b(t)},r.moveSectionDown=function(){var t=e(".pp-section.active").next(".pp-section");!t.length&&h.loopBottom&&(t=e(".pp-section").first()),t.length&&b(t)},r.moveTo=function(n){var i="";i=isNaN(n)?e(t).find('[data-anchor="'+n+'"]'):e(".pp-section").eq(n-1),i.length>0&&b(i)},e(h.sectionSelector).each(function(){e(this).addClass("pp-section")}),h.css3&&(h.css3=V()),e(o).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),r.setAllowScrolling(!0),e.isEmptyObject(h.navigation)||X();var v=e(".pp-section").length;e(".pp-section").each(function(t){e(this).data("data-index",t),e(this).css("z-index",v),t||0!==e(".pp-section.active").length||e(this).addClass("active"),"undefined"!=typeof h.anchors[t]&&e(this).attr("data-anchor",h.anchors[t]),"undefined"!=typeof h.sectionsColor[t]&&e(this).css("background-color",h.sectionsColor[t]),h.verticalCentered&&!e(this).hasClass("pp-scrollable")&&g(e(this)),v-=1}).promise().done(function(){h.navigation&&(e("#pp-nav").css("margin-top","-"+e("#pp-nav").height()/2+"px"),e("#pp-nav").find("li").eq(e(".pp-section.active").index(".pp-section")).find("a").addClass("active")),e(n).on("load",function(){E()}),e.isFunction(h.afterRender)&&h.afterRender.call(this)}),e(n).on("hashchange",O),e(t).keydown(function(t){if(h.keyboardScrolling&&!B())switch(t.which){case 38:case 33:r.moveSectionUp();break;case 40:case 34:r.moveSectionDown();break;case 36:r.moveTo(1);break;case 35:r.moveTo(e(".pp-section").length);break;case 37:r.moveSectionUp();break;case 39:r.moveSectionDown();break;default:return}}),h.normalScrollElements&&(e(t).on("mouseenter",h.normalScrollElements,function(){r.setMouseWheelScrolling(!1)}),e(t).on("mouseleave",h.normalScrollElements,function(){r.setMouseWheelScrolling(!0)})),e(t).on("click touchstart","#pp-nav a",function(t){t.preventDefault();var n=e(this).parent().index();b(e(".pp-section").eq(n))}),e(t).on({mouseenter:function(){var t=e(this).data("tooltip");e('<div class="pp-tooltip '+h.navigation.position+'">'+t+"</div>").hide().appendTo(e(this)).fadeIn(200)},mouseleave:function(){e(this).find(".pp-tooltip").fadeOut(200,function(){e(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);