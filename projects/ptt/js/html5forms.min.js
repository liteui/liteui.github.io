var html5Forms=new function(){function getBrowserLanguage(){var e=navigator.language;return e||(e=navigator.browserLanguage),e}function trim(e){return e.replace(initWhitespaceRe,"").replace(endWhitespaceRe,"")}var me=this,scriptNode=null,scriptDir=null,isScriptCompressed=!1,hasNativeBubbles=navigator.userAgent.indexOf("WebKit")<0||parseInt(navigator.userAgent.match(/AppleWebKit\/([^ ]*)/)[1].split(".")[0])>534,hasBadValidationImplementation=!hasNativeBubbles,globalEvent=document.addEventListener?document.createEvent("HTMLEvents"):null;me.start=function(){var e=navigator.userAgent.split("Firefox/");e.length>=1&&parseFloat(e[1])<=3.6?EventHelpers.addEvent(window,"load",me.init):me.init()},me.init=function(){function loadWidgets(){yepnope({test:loadHTML5Widgets,yep:scriptDir+"../../shared/js/html5Widgets.js",complete:function(){if(loadHTML5Widgets){for(var i=0;i<toRunAfterLoad.length;i++)eval(toRunAfterLoad[i]+"()");EventHelpers.init(),html5Widgets.init()}}})}function setupExtraFeatures(){for(var e=["input","select","textarea"],t=0;t<e.length;t++){for(var n=document.getElementsByTagName(e[t]),i=0;i<n.length;i++){var a=n[i];setErrorMessageEvents(a),setCustomClassesEvents(a),setNodeClasses(a,!0)}0==t&&a&&"submit"==a.type&&EventHelpers.addEvent(a,"click",submitClickEvent)}for(var r=document.getElementsByTagName("form"),t=0;t<r.length;t++)EventHelpers.addEvent(r[t],"submit",submitEvent),EventHelpers.addEvent(r[t],"reset",resetEvent)}function submitEvent(e){var t=EventHelpers.getEventTarget(e);markSubmitAttempt(t)}function resetEvent(e){var t=EventHelpers.getEventTarget(e);resetForm(t)}function submitClickEvent(e){var t=EventHelpers.getEventTarget(e);markSubmitAttempt(t.form)}function markSubmitAttempt(e){me.css.addClass(e,"wf2_submitAttempted")}function removeSubmitAttempt(e){me.css.removeClass(e,"wf2_submitAttempted")}function resetForm(e){removeSubmitAttempt(e);for(var t=["input","select","textarea"],n=0;n<t.length;n++)for(var i=e.getElementsByTagName(t[n]),a=0;a<i.length;a++){var r=i[a];me.css.removeClass(r,"wf2_lostFocus"),me.css.removeClass(r,"wf2_notBlank"),me.css.addClass(r,"wf2_isBlank")}}function setCustomClassesEvents(e){EventHelpers.addEvent(e,"keyup",nodeChangeEvent),EventHelpers.addEvent(e,"change",nodeChangeEvent),EventHelpers.addEvent(e,"blur",nodeBlurEvent)}function nodeChangeEvent(e){var t=EventHelpers.getEventTarget(e);setNodeClasses(t)}function setNodeClasses(e,t){""===e.value?(me.css.addClass(e,"wf2_isBlank"),me.css.removeClass(e,"wf2_notBlank")):(me.css.addClass(e,"wf2_notBlank"),me.css.removeClass(e,"wf2_isBlank")),t&&"SELECT"==e.nodeName&&e.setAttribute("data-wf2-initialvalue",e.value),"SELECT"==e.nodeName&&me.getAttributeValue(e,"data-wf2-initialvalue")!=e.value||"SELECT"!=e.nodeName&&me.getAttributeValue(e,"value")!=e.value?(me.css.removeClass(e,"wf2_defaultValue"),me.css.addClass(e,"wf2_notDefaultValue")):(me.css.addClass(e,"wf2_defaultValue"),me.css.removeClass(e,"wf2_notDefaultValue"))}function nodeBlurEvent(e){var t=EventHelpers.getEventTarget(e);me.css.addClass(t,"wf2_lostFocus")}function setErrorMessageEvents(e){var t=me.getAttributeValue(e,"data-errormessage");if(t){if(document.addEventListener)e.addEventListener("invalid",showCustomMessageEvent,!1),e.addEventListener("focus",showCustomMessageEvent,!1),window.opera||e.addEventListener("keypress",clearMessageIfValidEvent,!1),e.addEventListener("input",clearMessageIfValidEvent,!1),"SELECT"==e.nodeName&&(e.addEventListener("change",clearMessageIfValidEvent,!1),e.addEventListener("click",clearMessageIfValidEvent,!1));else{var n=' this.setCustomValidity("'+t+'");';e.oninvalid?e.oninvalid+=n:e.oninvalid=n,e.oninvalid=new Function("event",e.oninvalid),e.attachEvent("onkeydown",clearMessageIfValidEvent),e.attachEvent("oninput",clearMessageIfValidEvent),"SELECT"==e.nodeName&&(e.attachEvent("change",clearMessageIfValidEvent,!1),e.attachEvent("click",clearMessageIfValidEvent,!1))}clearMessageIfValid(e)}}function showCustomMessageEvent(e){var t=e.currentTarget||e.srcElement;showCustomMessage(t)}function showCustomMessage(e){if(!e.validity.valid){var t=me.getAttributeValue(e,"data-errormessage");e.setCustomValidity(t)}}function clearMessageIfValidEvent(e){var t=e.currentTarget||e.srcElement;clearMessageIfValid(t)}function clearMessageIfValid(e){e.setCustomValidity&&(e.setCustomValidity(""),e.checkValidity()||(showCustomMessage(e),document.addEventListener&&(globalEvent.initEvent("invalid",!0,!0),e.dispatchEvent(globalEvent))))}for(var scriptNodes=document.getElementsByTagName("script"),i=0;i<scriptNodes.length;i++)if(scriptNode=scriptNodes[i],scriptNode.src.match("html5Forms(_src|-p|).js$")){scriptNode=scriptNode,scriptDir=getScriptDir(),scriptNode.src.indexOf("html5Forms-p.js")>=0&&(isScriptCompressed=!0);break}if(scriptNode&&window.yepnope){var inputSupport=Modernizr.inputtypes,supportArray=scriptNode.getAttribute("data-webforms2-support");if(me.forceJSValidation="true"==scriptNode.getAttribute("data-webforms2-force-js-validation"),me.turnOffValidation="true"==scriptNode.getAttribute("data-webforms2-turn-off-validation"),me.forceJSDatePicker="true"==scriptNode.getAttribute("data-webforms2-force-js-date-picker"),!supportArray)return;"all"==trim(supportArray)&&(supportArray="validation,number,color,date,output,range,placeholder"),supportArray=supportArray.split(",");for(var toLoad=[],toRunAfterLoad=[],loadHTML5Widgets=!1,i=0;i<supportArray.length;i++){var supportReq=trim(supportArray[i]);switch(supportReq){case"validation":case"autofocus":me.turnOffValidation?EventHelpers.addPageLoadEvent("html5Forms.turnOffNativeValidation"):(!Modernizr.input.required||hasBadValidationImplementation||me.forceJSValidation)&&(toLoad=isScriptCompressed?toLoad.concat([scriptDir+"../../shared/js/weston.ruter.net/webforms2/webforms2-p.js"]):toLoad.concat([scriptDir+"../../shared/js/weston.ruter.net/webforms2/webforms2_src.js"]),"autofocus"==supportReq&&(loadHTML5Widgets=!0));break;case"number":inputSupport.number||(toLoad=toLoad.concat([scriptDir+"../../shared/css/number.css"]),loadHTML5Widgets=!0);break;case"color":inputSupport.color||(toLoad=toLoad.concat([scriptDir+"../../shared/js/jscolor/jscolor.js"]),loadHTML5Widgets=!0);break;case"datetime":case"date":var lang=scriptNode.getAttribute("data-lang");lang&&lang.match(/^(af|al|bg|big5|br|ca|cn|cs|da|de|du|el|en|es|fi|fr|he|hr|hu|it|jp|ko|ko|lt|lt|lv|nl|no|pl|pl|pt|ro|ru|si|sk|sp|sv|tr|zh)$/)||(lang=getBrowserLanguage().split("-")[0]),(!inputSupport.date||me.forceJSDatePicker)&&(toLoad=toLoad.concat([scriptDir+"../../shared/js/jscalendar-1.0/calendar-win2k-1.css",scriptDir+"../../shared/js/jscalendar-1.0/calendar.js",scriptDir+"../../shared/js/jscalendar-1.0/lang/calendar-"+lang+".js",scriptDir+"../../shared/js/jscalendar-1.0/calendar-setup.js"]),loadHTML5Widgets=!0);break;case"output":supportsOutput()||(loadHTML5Widgets=!0);break;case"range":inputSupport.range||(toLoad=toLoad.concat([scriptDir+"../../shared/css/slider.css",scriptDir+"../../shared/js/frequency-decoder.com/slider.js"]),loadHTML5Widgets=!0,toRunAfterLoad.push("fdSliderController.redrawAll"));break;case"placeholder":case"autofocus":Modernizr.input[supportReq]||(loadHTML5Widgets=!0)}}0==toLoad.length?(loadWidgets(),document.addEventListener&&document.addEventListener("DOMContentLoaded",setupExtraFeatures,!1)):yepnope({load:toLoad,complete:function(){loadWidgets(),setupExtraFeatures()}})}},me.turnOffNativeValidation=function(){for(var e=document.getElementsByTagName("form"),t=0;t<e.length;t++)e[t].setAttribute("novalidate","novalidate")};var supportsOutput=function(){var e=document.createElement("output");return void 0!=e.value&&(void 0!==e.onforminput||void 0!==e.oninput)},getScriptDir=function(){var e=scriptNode.src.split("/");return e.pop(),e.join("/")+"/"};me.getAttributeByName=function(e,t){for(var n,i=e.attributes,n=0;n<i.length;n++){var a=i[n];if(a.nodeName==t&&a.specified)return a}return null},me.getAttributeValue=function(e,t){var n=me.getAttributeByName(e,t);return null!=n?n.nodeValue:null};var initWhitespaceRe=/^\s\s*/,endWhitespaceRe=/\s\s*$/;me.css=new function(){function n(e){return"\\s"+e+"\\s|^"+e+"\\s|\\s"+e+"$|^"+e+"$"}var e=this,t=new RegExp("\\s");e.addClass=function(n,i){t.test(i)||e.isMemberOfClass(n,i)||(n.className+=" "+i)},e.removeClass=function(e,i){if(!t.test(i)){var a=new RegExp(n(i),"g"),r=e.className;e.className&&(e.className=r.replace(a," "))}},e.isMemberOfClass=function(e,i){if(t.test(i))return!1;var a=new RegExp(n(i),"g");return a.test(e.className)}}},EventHelpers=new function(){function mylog(e){window.console&&window.console.log&&console.log(e)}function init(){}var me=this,safariTimer,isSafari=/WebKit/i.test(navigator.userAgent),isIEPolling=!1,globalEvent,safariVer=navigator.userAgent.match(/Version\/([^\s]*)/);null!=safariVer&&2==safariVer.length&&(safariVer=parseFloat(safariVer[1])),me.init=function(){me.hasPageLoadHappened(arguments)||(document.createEvent?globalEvent=document.createEvent("HTMLEvents"):document.createEventObject&&(globalEvent=document.createEventObject()),me.docIsLoaded=!0)},me.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](self.event)},e.attachEvent("on"+t,e[t+n]))},me.removeEvent=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)try{e.detachEvent("on"+t,e[t+n]),e[t+n]=null,e["e"+t+n]=null}catch(i){}},me.getEventTarget=function(e){return e.toElement?e.toElement:e.currentTarget?e.currentTarget:e.srcElement?e.srcElement:null},me.getKey=function(e){return e.keyCode?e.keyCode:e.event&&e.event.keyCode?window.event.keyCode:e.which?e.which:void 0},me.addPageLoadEvent=function(funcName,timerForIE){var func=eval(funcName);return!isIEPolling&&/loaded|complete|interactive/.test(document.readyState)?(mylog("execute immediately"),void func()):void(isSafari&&3.1>safariVer||isIEPolling?(mylog("polling"),pageLoadEventArray.push(func),safariTimer||(safariTimer=setInterval(function(){return/loaded|complete/.test(document.readyState)?(clearInterval(safariTimer),void me.runPageLoadEvents()):void(set=!0)},10))):document.addEventListener?(document.addEventListener("DOMContentLoaded",func,null),mylog("DOMContentLoaded "+document.readyState)):(mylog("window.load"),me.addEvent(window,"load",func)))};var pageLoadEventArray=new Array;me.runPageLoadEvents=function(e){if(isSafari||isIEPolling||"complete"==e.srcElement.readyState)for(var t=0;t<pageLoadEventArray.length;t++)pageLoadEventArray[t]()},me.hasPageLoadHappened=function(e){return e.callee.done?!0:void(e.callee.done=!0)},me.preventDefault=function(e){e.preventDefault&&e.preventDefault();try{e.returnValue=!1}catch(t){}},me.fireEvent=function(e,t,n){return e?e.dispatchEvent?(globalEvent.initEvent(t,!0,!0),!e.dispatchEvent(globalEvent)):document.createEventObject?e.fireEvent("on"+t,globalEvent):!1:void 0},me.isSupported=function(e,t){var n=document.createElement(t);e="on"+e;var i=e in n;return i||(n.setAttribute(e,"return;"),i="function"==typeof n[e]),n=null,i},window.html5Forms||init()};html5Forms.start();