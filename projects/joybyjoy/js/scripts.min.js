// Слайдер картинок, блоков и т.д.
$(document).ready(function(){
  $(".slider").owlCarousel({
      items:1,
      nav: true, 
      mouseDrag: false,
      touchDrag: false,
      loop: true,
      smartSpeed: 600
  });
});






// Переключалки в слайдере
$("[data-arrow='prev']").click(function(){
   $(".owl-prev")[0].click(); 
    $("[data-arrow='prev']").click(function(){
        $(".owl-prev")[0].click(); 
    });
});

$("[data-arrow='next']").click(function(){
   $(".owl-next")[0].click(); 
    $("[data-arrow='next']").click(function(){
        $(".owl-next")[0].click(); 
    });
});






// Плавное появление блоков при скролле
window.sr = ScrollReveal();
var fooReveal1 = {delay: 100, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal2 = {delay: 200, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};
var fooReveal3 = {delay: 200, distance: '40px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 1000};

var fooReveal22 = {delay: 200, distance: '150px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 2000};
var fooReveal23 = {delay: 300, distance: '150px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 2000};
var fooReveal24 = {delay: 200, distance: '150px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 2000};
var fooReveal25 = {delay: 300, distance: '150px', easing: 'cubic-bezier(0.3, 0.5, 0.1, 1)', scale: 1, mobile: false, duration: 2000};

sr.reveal('section.first .container, h1, section.eighth .stages > ol > li, section.nineth h2', fooReveal1);
sr.reveal('header, section.second p, section.third p, section.fourth p, section.fifth .container .line, section.sixth .slider, section.seventh .columns > *, section.eighth .container > p, section.nineth .frame > p', fooReveal2);
sr.reveal('section.second .container > div .buttons, section.third .buttons, section.fourth .buttons, section.fifth .container .numbers, section.seventh .buttons, section.eighth .buttons, section.nineth .buttons', fooReveal3);

sr.reveal('section.second > img:first-child, section.third > img:nth-child(1), section.fourth > img:first-child, section.fifth > img:nth-child(1), section.seventh > img:first-child, section.seventh > img:nth-child(2), section.seventh > img:nth-child(3), section.eighth > img:nth-child(1), section.nineth .frame > img:nth-of-type(1)', fooReveal22);
sr.reveal('section.second > img:nth-child(2), section.third > img:nth-child(2), section.fourth > img:nth-child(2), section.fifth > img:nth-child(2), section.eighth > img:nth-child(2), section.nineth .frame > img:nth-of-type(2), section.nineth .frame > img:nth-of-type(3)', fooReveal23);
sr.reveal('section.second > img:nth-child(3), section.eighth > img:nth-child(3), section.nineth .frame > img:nth-of-type(4)', fooReveal24);
sr.reveal('section.second > img:nth-child(4), section.eighth > img:nth-child(4), section.nineth .frame > img:nth-of-type(4)', fooReveal25);






// Ссылки навигации по странице (добавить класс nav к ссылке с #)
$("a.nav").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1200);
});






// Всплывающие окна
$(".fancybox").fancybox({
    fitToView   : false,
    autoSize    : true,
    openEffect  : 'fade',
    closeEffect : 'fade',
});

$(".fancyboxsecond").click(function(event){
    event.preventDefault();
    var href = $(this).attr("href");
    $.fancybox([{href : href, fitToView   : false, autoSize    : true, openEffect  : 'fade', closeEffect : 'fade',}]);
});






// Маска для поля ввода телефона
$(document).ready(function(){
   $("input[name='tel']").inputmask("+7 (999) 999-99-99");
});






// Видеофон
var tag = document.createElement('script');
		tag.src = 'https://www.youtube.com/player_api';
var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var tv,
		playerDefaults = {autoplay: 1, autohide: 1, modestbranding: 0, rel: 0, showinfo: 0, controls: 0, disablekb: 1, enablejsapi: 0, iv_load_policy: 3, loop: 1};
var vid = [
			{'videoId': 'v2Ha_l-HCpE', 'startSeconds': 0, 'endSeconds': 10, 'suggestedQuality': 'hd720'}
		],
		randomVid = Math.floor(Math.random() * vid.length),
        currVid = randomVid;

function onYouTubePlayerAPIReady(){
  tv = new YT.Player('tv', {events: {'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange}, playerVars: playerDefaults});
}

function onPlayerReady(){
  tv.loadVideoById(vid[currVid]);
  tv.mute();
}

function onPlayerStateChange(e) {
  if (e.data === 1){
    $('#tv').addClass('active');
  } else if (e.data === 2){
    $('#tv').removeClass('active');
    if(currVid === vid.length - 1){
      currVid = 0;
    } else {
      currVid++;  
    }
    tv.loadVideoById(vid[currVid]);
    tv.seekTo(vid[currVid].startSeconds);
  }
}

function vidRescale(){

  var w = $(window).width()+200,
    h = $(window).height()+200;

  if (w/h > 16/9){
    tv.setSize(w, w/16*9);
    $('.tv .screen').css({'left': '0px'});
  } else {
    tv.setSize(h/9*16, h);
    $('.tv .screen').css({'left': -($('.tv .screen').outerWidth()-w)/2});
  }
}

$(window).on('load resize', function(){
  vidRescale();
});